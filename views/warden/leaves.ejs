
<body>
  <ul>
    <% leavesList.forEach(function(leave) { %>
      <li>
        <h5>Student : <%= leave.reg_no %></h5>
        <p>Reason: <%= leave.reason %></p>
        <p>From: <%= leave.from %></p>
        <p>To: <%= leave.to %></p>
        <p>Status: <%= leave.status %> </p>
        <button onclick="approveLeave('<%= leave.reg_no %>')">Approve</button>
        <button onclick="rejectLeave('<%= leave.reg_no %>')">Reject</button>
      </li>
    <% }); %>
  </ul>

  <script>
    // function to handle approve button click
function approveLeave(reg_no) {
  fetch('/leaves/approve', {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ reg_no })
  })
  .then(response => {
    if (response.ok) {
      console.log('Leave approved successfully');
      // reload the page to see the updated status
      location.reload();
    } else {
      console.log('Failed to approve leave');
    }
  })
  .catch(error => {
    console.log(error);
  });
}

// function to handle reject button click
function rejectLeave(reg_no) {
  fetch('/leaves/approve', {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ reg_no })
  })
  .then(response => {
    if (response.ok) {
      console.log('Leave rejected successfully');
      // reload the page to see the updated status
      location.reload();
    } else {
      console.log('Failed to reject leave');
    }
  })
  .catch(error => {
    console.log(error);
  });
}
  </script>
</body>